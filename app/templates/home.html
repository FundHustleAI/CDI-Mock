{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>IELTS CDI MOCK</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: #f5f5f5;
        }
        .container {
            text-align: center;
        }
        .card {
            border-radius: 15px;
            box-shadow: 0px 4px 10px rgba(0,0,0,0.1);
            position: relative;
        }
        .card img {
            width: 100%;
            height: 200px;
            object-fit: contain;
            padding: 20px;
        }
        .locked {
            opacity: 0.5;
            pointer-events: none;
        }
        h1 {
            font-weight: bold;
        }
        h5 {
            color: #555;
        }

        /* Animated checkmark */
        .checkmark {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: inline-block;
            border: 3px solid #28a745;
            position: absolute;
            top: 10px;
            right: 10px;
            animation: pop 0.4s ease forwards;
        }
        .checkmark::after {
            content: '';
            position: absolute;
            left: 12px;
            top: 6px;
            width: 12px;
            height: 24px;
            border-right: 3px solid #28a745;
            border-bottom: 3px solid #28a745;
            transform: rotate(45deg);
            animation: draw 0.4s ease forwards;
        }
        @keyframes pop {
            from { transform: scale(0); }
            to { transform: scale(1); }
        }
        @keyframes draw {
            from { height: 0; width: 0; }
            to { height: 24px; width: 12px; }
        }
    </style>
</head>
<body>
<div class="container">
    <!-- Title -->
    <h1>IELTS CDI MOCK</h1>
    <h5>Your pathway to IELTS success</h5>
    <h5>Complete each section step by step</h5>

    <div class="row mt-5">

        <!-- Listening Card -->
        <div class="col-md-4 mb-4">
            <div class="card" style="background-color: #d1e7ff;">
                {% if progress.listening_passed %}
                    <span class="checkmark"></span>
                {% endif %}
                <img src="{% static 'assets/music.png' %}" alt="Listening">
                <div class="card-body">
                    <h4 class="fw-bold">Listening</h4>
                    {% if progress.listening_passed %}
                        <a href="{% url 'start_test' 'listening' %}" class="btn btn-primary w-100">Retake</a>
                    {% else %}
                        <a href="{% url 'start_test' 'listening' %}" class="btn btn-primary w-100">Start</a>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Reading Card -->
        <div class="col-md-4 mb-4">
            <div class="card {% if not progress.listening_passed %}locked{% endif %}" style="background-color: #ffe5b4;">
                {% if progress.reading_passed %}
                    <span class="checkmark"></span>
                {% endif %}
                <img src="{% static 'assets/book.png' %}" alt="Reading">
                <div class="card-body">
                    <h4 class="fw-bold">Reading</h4>
                    {% if progress.reading_passed %}
                        <a href="{% url 'start_test' 'reading' %}" class="btn btn-warning w-100">Retake</a>
                    {% elif progress.listening_passed %}
                        <a href="{% url 'start_test' 'reading' %}" class="btn btn-warning w-100">Start</a>
                    {% else %}
                        <button class="btn btn-warning w-100" disabled>Locked</button>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Writing Card -->
        <div class="col-md-4 mb-4">
            <div class="card {% if not progress.reading_passed %}locked{% endif %}" style="background-color: #ffd1dc;">
                {% if progress.writing_passed %}
                    <span class="checkmark"></span>
                {% endif %}
                <img src="{% static 'assets/w.png' %}" alt="Writing">
                <div class="card-body">
                    <h4 class="fw-bold">Writing</h4>
                    {% if progress.writing_passed %}
                        <a href="{% url 'start_test' 'writing' %}" class="btn btn-danger w-100">Retake</a>
                    {% elif progress.reading_passed %}
                        <a href="{% url 'start_test' 'writing' %}" class="btn btn-danger w-100">Start</a>
                    {% else %}
                        <button class="btn btn-danger w-100" disabled>Locked</button>
                    {% endif %}
                </div>
            </div>
        </div>

    </div>
</div>
</body>
</html>
